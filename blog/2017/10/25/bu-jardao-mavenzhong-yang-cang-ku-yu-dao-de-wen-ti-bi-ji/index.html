
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>发布Jar到Maven中央仓库遇到的问题笔记 - 程序员小刚</title>
  <meta name="author" content="SargerasWang">

  
  <meta name="description" content="本来在github上有开源一个java的Excel导入导出工具包(ExcelUtil) 最近在处理bug的时候,看到有位朋友希望作者能把构件上传至Maven中央库中,想来为了方便大家,就按照他博客文章发布构件至Maven中央库中的步骤去做,期间遇到一些问题,在这里记录. GPG安装 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sargeraswang.com/blog/2017/10/25/bu-jardao-mavenzhong-yang-cang-ku-yu-dao-de-wen-ti-bi-ji">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="程序员小刚" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

<script src="http://mat1.gtimg.com/app/openjs/openjs.js#autoboot=no&debug=no"></script>

<script type="text/javascript">

function addBlankTargetForLinks () {

  $('a[href^="http"]').each(function(){

      $(this).attr('target', '_blank');

  });

}

$(document).bind('DOMNodeInserted', function(event) {

  addBlankTargetForLinks();

});

</script>


  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">Hack</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">程序员小刚</a></h1>
  
    <h2>我常常思考为什么鸟儿拥有整片天空，却常常停留在一个地方。然后我问了自己同样的问题。</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sargeraswang.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">文章列表</a></li>
  <li><a href="/about">关于我</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">发布Jar到Maven中央仓库遇到的问题笔记</h1>
    
    
      <p class="meta">
        








  


<time datetime="2017-10-25T20:52:00+08:00" pubdate data-updated="true">2017-10-25</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>本来在github上有开源一个java的Excel导入导出工具包(<a href="https://github.com/SargerasWang/ExcelUtil">ExcelUtil</a>)</p>

<p>最近在处理bug的时候,看到有位朋友<a href="https://github.com/SargerasWang/ExcelUtil/issues/11">希望作者能把构件上传至Maven中央库中</a>,想来为了方便大家,就按照他博客文章<a href="http://www.arccode.net/publish-artifact-to-maven-central-repository.html">发布构件至Maven中央库</a>中的步骤去做,期间遇到一些问题,在这里记录.</p>

<!-- more -->


<h3>GPG安装</h3>

<p>目前直接安装最新的是<code>gpg2</code>所以,执行任何命令都应该是<code>gpg2</code>开头</p>

<h3>将公钥发布到 PGP 密钥服务器</h3>

<p>执行</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gpg --keyserver hkp://pool.sks-keyservers.net --send-keys </span></code></pre></td></tr></table></div></figure>


<p>会有报错</p>

<p><code>gpg: keyserver send failed: No route to host</code></p>

<p>修改为,网络上提供的</p>

<p><code>hkp://ipv4.pool.sks-keyservers.net:80</code></p>

<p>则会有错误</p>

<p><code>gpg: keyserver send failed: End of file</code></p>

<p>或</p>

<p><code>gpg: keyserver send failed: No name</code></p>

<p>最终,还是在官网查到了可用的地址:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>hkp://p80.pool.sks-keyservers.net:80</span></code></pre></td></tr></table></div></figure>


<p><strong>查询公钥是否发布成功 同理使用这个url</strong></p>

<h3>上传构件至OSS中</h3>

<p>由于gpg的maven插件,默认使用<code>gpg</code>命令,所以执行<code>mvn clean deploy</code>会有如下错误:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-gpg-plugin:1.6:sign (default) on project excel-util: Unable to execute gpg command: Error while executing process. Cannot run program "gpg": error=2, No such file or directory -&gt; [Help 1]
</span></code></pre></td></tr></table></div></figure>


<p>应在<code>pom.xml</code>中增加设置,<code>&lt;properties&gt;</code>中增加<code>&lt;gpg.executable&gt;gpg2&lt;/gpg.executable&gt;</code></p>

<p>以上是遇到的所有问题.</p>

<p>在release完成后,客服答复是这样的:</p>

<blockquote><p>Central sync is activated for com.sargeraswang. After you successfully release, your component will be published to Central, typically within 10 minutes, though updates to search.maven.org can take up to two hours.</p></blockquote>

<p>大概意思是,10分钟内会被发布到中央仓库,两小时内会更新到<code>search.maven.org</code></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">SargerasWang</span></span>

      








  


<time datetime="2017-10-25T20:52:00+08:00" pubdate data-updated="true">2017-10-25</time>
      


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2017/04/20/sseemitter-defaulthandlerexceptionresolver-async-timeout-for-get-jie-jue/" title="Previous Post: SseEmitter DefaultHandlerExceptionResolver : Async timeout for GET 解决">&laquo; SseEmitter DefaultHandlerExceptionResolver : Async timeout for GET 解决</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/10/25/bu-jardao-mavenzhong-yang-cang-ku-yu-dao-de-wen-ti-bi-ji/">发布Jar到Maven中央仓库遇到的问题笔记</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/04/20/sseemitter-defaulthandlerexceptionresolver-async-timeout-for-get-jie-jue/">SseEmitter DefaultHandlerExceptionResolver : Async Timeout for GET 解决</a>
      </li>
    
      <li class="post">
        <a href="/blog/2017/04/19/netty-org-dot-msgpack-dot-messagetypeexception-expected-array-but-got-not-array-value/">Netty org.msgpack.MessageTypeException: Expected Array but Got Not Array Value</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/10/mybatiszhong-associationcha-xun-yu-zhu-cha-xun-zai-bu-tong-shu-ju-ku-de-jie-jue-fang-fa/">Mybatis中association查询与主查询在不同数据库的解决方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/05/jian-dan-de-linuxxia-mavencheng-xu-zi-dong-bu-shu-jiao-ben/">简单的linux下maven程序自动部署脚本</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>关于我</h1>
  <p>一个正在追逐梦想的人.</p>
  <p>腾讯微博: <a href="http://t.qq.com/VipXiaoGang">@VipXiaoGang</a><br/>
     Github: <a href="https://github.com/sargeraswang">SargerasWang</a><br/>
     E-mail: <a href="mailto:sargeraswang@gmail.com">sargeraswang@gmail.com</a></p>
  </p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - SargerasWang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  











</body>
</html>
